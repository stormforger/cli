language: go

go:
- "1.12.x"

env:
  global:
    - GO111MODULE=on
    # DOCKER_USERNAME="stormforger"
    # DOCKER_PASSWORD=$geheim
    # GITHUB_TOKEN=${see tisba/"stormforger/cli goreleaser"}
    - secure: "JwBtjM+m8PXW5Q/9bXZk9jAfFzy1PmwZyX1A/CoLZ6Xw/V58vUBi93RT88gItFwqLPwxDME1oJMxKD8OfkVI9mN9keVZuJzqOmb6S7C/bAUwXMRhfV7OkQpPlYj0rZpozdym8yXH9nY0pD1ojrLINFn2o7wMvZI97pntg8iThuOg9rYlsdBmDoSofTALm5H+M0u1I/PQIQ9oGEjXgVBLtzS6bIO0tI0CfIt4Mo+TWoVKAzondlzwuc6pL7GO9ZHUNO5TvXA6mJxp8m+jPxaYugSPvZb6gY8OSHMmAy85ql22qG6jQ0bf0rnDi5nNLqVHIuSs0iRI5WWKLZHTzqTAGFxHaB7jBXsyJTJ5WI6S+WudNNY7rNiJtDwHvsI4ULP5W/wjj67oMjAACk8LhP5NqeN/hEj1EAURyZVWlCjimHs90p9bLUFtqa8yT83EZws1MbjpS2Y6CNzY+lsxUmUPw0uoCl8a9fpSjQy32kqZgNADl3JdYSkSGrE+m15jLpwy5nEvqqLwuZNoI5r7EpR/3cZh9RgZAMyUXfUTL360iuO2OsvW1UTQGvbRFy2AgsUNweV72jBaqGiES8dpaDz3sYOaC0oF9fMpOEg59D0T7o2I1jKO7S2m0QfVueXo38q0gyYYXm+sG4PdgFaLbF4IyzEkMx2E3jyNM3qqKq7ZfwA="

cache:
  directories:
    - $HOME/.cache/go-build
    - $HOME/gopath/pkg/mod

services:
- docker

after_success:
- test -n "$TRAVIS_TAG" && docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"

deploy:
- provider: script
  skip_cleanup: true
  script: curl -sL https://git.io/goreleaser | bash
  on:
    tags: true
    condition: $TRAVIS_OS_NAME = linux
